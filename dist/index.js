"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0});var Node=function t(e,r){_classCallCheck(this,t),this.key=e,this.data=r,this.left=null,this.right=null,this.parent=null,this.cnt=0},SplayTree=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t,e){return e<t?1:t<e?-1:0};_classCallCheck(this,e),this.comparator=t,this._root=null,this._size=0}return _createClass(e,[{key:"update",value:function(t){t.cnt=1,t.left&&(t.cnt+=t.left.cnt),t.right&&(t.cnt+=t.right.cnt)}},{key:"rotate",value:function(t,e){var r=e.parent,i=null;return e===r.left?(r.left=i=e.right,e.right=r):(r.right=i=e.left,e.left=r),e.parent=r.parent,r.parent=e,i&&(i.parent=r),e.parent?r===e.parent.left?e.parent.left=e:e.parent.right=e:t=e,this.update(r),this.update(e),t}},{key:"splay",value:function(t,e){for(;e.parent;){var r=e.parent,i=r.parent;i&&this.rotate(t,e===r.left==(r===i.left)?r:e),t=this.rotate(t,e)}return t}},{key:"insert",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this._root,i=null;if(!r)return i=new Node(t,e),this._root=i,this._size++,i;for(;;){if(t===r.key)return;if(0===this.comparator(t,r.key))return i;if(this.comparator(t,r.key)<0){if(!r.left){i=new Node(t,e),(r.left=i).parent=r,this._root=this.splay(this._root,i);break}r=r.left}else{if(!r.right){i=new Node(t,e),(r.right=i).parent=r,this._root=this.splay(this._root,i);break}r=r.right}}return this._size++,i}},{key:"find",value:function(t){var e=this._root;if(!e)return!1;for(;e&&0!==this.comparator(t,e.key);)if(this.comparator(t,e.key)<0){if(!e.left)break;e=e.left}else{if(!e.right)break;e=e.right}return this._root=this.splay(this._root,e),0===this.comparator(t,e.key)}},{key:"findKth",value:function(t){if(t>=this._size)return!1;for(var e=this._root;;){for(;e.left&&e.left.cnt>t;)e=e.left;if(e.left&&(t-=e.left.cnt),!t--)break;e=e.right}return this._root=this.splay(this._root,e),!0}},{key:"remove",value:function(t){if(!this.find(t))return!1;var e=this._root;if(e.left){if(e.right){this._root=e.left,this._root.parent=null;for(var r=this._root;r.right;)r=r.right;return r.right=e.right,e.right.parent=r,!(e=null)}return this._root=e.left,!(e=this._root.parent=null)}return e.right?(this._root=e.right,!(e=this._root.parent=null)):(e=null,!(this._root=null))}},{key:"keys",value:function(){var t=[];return[function t(e,r){r.push(e.key),e.left&&t(e.left,r),e.right&&t(e.right,r)},function t(e,r){e.left&&t(e.left,r),r.push(e.key),e.right&&t(e.right,r)},function t(e,r){e.left&&t(e.left,r),e.right&&t(e.right,r),r.push(e.key)}][0<arguments.length&&void 0!==arguments[0]?arguments[0]:0](this._root,t),t}},{key:"root",get:function(){return this._root}},{key:"size",get:function(){return this._size}}]),e}();exports.SplayTree=SplayTree;
