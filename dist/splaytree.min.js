var splaytree=function(t){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function t(r,e){n(this,t),this.key=r,this.data=e,this.left=null,this.right=null,this.parent=null,this.cnt=0},r=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t,r){return r<t?1:t<r?-1:0};n(this,r),this.comparator=t,this._root=null,this._size=0}var t,e,i;return t=r,(e=[{key:"update",value:function(t){t.cnt=1,t.left&&(t.cnt+=t.left.cnt),t.right&&(t.cnt+=t.right.cnt)}},{key:"rotate",value:function(t,r){var e=r.parent,i=null;return r===e.left?(e.left=i=r.right,r.right=e):(e.right=i=r.left,r.left=e),r.parent=e.parent,e.parent=r,i&&(i.parent=e),r.parent?e===r.parent.left?r.parent.left=r:r.parent.right=r:t=r,this.update(e),this.update(r),t}},{key:"splay",value:function(t,r){for(;r.parent;){var e=r.parent,i=e.parent;i&&this.rotate(t,r===e.left==(e===i.left)?e:r),t=this.rotate(t,r)}return t}},{key:"insert",value:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=this._root,i=null;if(!e)return i=new h(t,r),this._root=i,this._size++,i;for(;;){if(t===e.key)return;if(0===this.comparator(t,e.key))return i;if(this.comparator(t,e.key)<0){if(!e.left){i=new h(t,r),(e.left=i).parent=e,this._root=this.splay(this._root,i);break}e=e.left}else{if(!e.right){i=new h(t,r),(e.right=i).parent=e,this._root=this.splay(this._root,i);break}e=e.right}}return this._size++,i}},{key:"find",value:function(t){var r=this._root;if(!r)return!1;for(;r&&0!==this.comparator(t,r.key);)if(this.comparator(t,r.key)<0){if(!r.left)break;r=r.left}else{if(!r.right)break;r=r.right}return this._root=this.splay(this._root,r),0===this.comparator(t,r.key)}},{key:"findKth",value:function(t){if(t>=this._size)return!1;for(var r=this._root;;){for(;r.left&&r.left.cnt>t;)r=r.left;if(r.left&&(t-=r.left.cnt),!t--)break;r=r.right}return this._root=this.splay(this._root,r),!0}},{key:"remove",value:function(t){if(!this.find(t))return!1;var r=this._root;if(r.left){if(r.right){this._root=r.left,this._root.parent=null;for(var e=this._root;e.right;)e=e.right;return e.right=r.right,r.right.parent=e,!(r=null)}return this._root=r.left,!(r=this._root.parent=null)}return r.right?(this._root=r.right,!(r=this._root.parent=null)):(r=null,!(this._root=null))}},{key:"keys",value:function(){var t=[];return[function t(r,e){e.push(r.key),r.left&&t(r.left,e),r.right&&t(r.right,e)},function t(r,e){r.left&&t(r.left,e),e.push(r.key),r.right&&t(r.right,e)},function t(r,e){r.left&&t(r.left,e),r.right&&t(r.right,e),e.push(r.key)}][0<arguments.length&&void 0!==arguments[0]?arguments[0]:0](this._root,t),t}},{key:"root",get:function(){return this._root}},{key:"size",get:function(){return this._size}}])&&o(t.prototype,e),i&&o(t,i),r}();return t.SplayTree=r,t}({});
